# TCP와 UDP

들어가기 전에 전송계층에 대한 용어정리좀 해보자.

네트워크 애플리케이션에는 **하나 이상의 전송 계층 프로토콜을 사용**할 수 있다.

전송 계층 프로토콜은 **서로 다른 호스트에서 동작하는** `프로세스`들 사이의 **논리적인 통신을 제공**한다.(네트워크 계층 프로토콜은 `호스트`들 사이의 논리적인 통신을 제공한다)

> 세그먼트: **인터넷에서의 전송 계층 패킷**을 말한다. UDP에 대한 패킷은 종종 데이터그램으로 표현되기도 한다.

> IP: 인터넷 프로토콜의 줄임말로, 인터넷의 **네트워크 계층** 프로토콜을 말한다.

## TCP와 UDP의 기본적인 기능

가장 기본적인 기능은 종단 시스템 사이의 IP 전달 서비스를 종단 시스템에서 동작하는 **두 프로세스간의 전달 서비스**로 확장하는 것

### 트랜스포트 다중화와 역다중화

호스트와 호스트 사이의 전달을 프로세스와 프로세스의 전달로 확장하는 과정에서 일어난다.

- 다중화(Multiplexing)
  - **출발지 호스트**에서 이루어지는 작업
  - 소켓으로부터 데이터를 모으고 헤더정보(역다중화에 쓰임)를 추가하여 세그먼트를 생성한다.
  - 생성된 세그먼트들을 **네트워크 계층으로 전달**하는 작업
- 역다중화(DeMultiplexing)
  - **도착지 호스트**에서 이루어지는 작업
  - 헤더정보를 이용해서 수신한 세그먼트를 올바른 소켓으로 전달하는 작업
  - 애플리케이션 내 프로세스로 데이터를 전달하는 작업(**전송 계층으로 전달**)

## UDP와 TCP

||UDP|TCP|
|--|--|--|
|데이터 전달|비신뢰적|신뢰적: 흐름제어, 순서번호, 확인응답, 타이머 이용|
|연결형태|비연결형|연결형|
|무결성 검사|O: 헤더에 오류 검출 필드 포함|O: 헤더에 오류 검출 필드 포함|
|전달|다중화/역다중화|다중화/역다중화|
|트래픽 조절|불가|가능: 혼잡 제어|

### UDP(User Datagram Protocol)

**특징**

- `best-effort` service: 전달 보장 X, 순서 보장 X, 데이터 무결성 보장 X
- `connectionless`: 송/수신측 handshaking X, 각 UDP datagram은 독립적으로 다뤄짐

**UDP 사용 예시**
- DNS
- SNMP
- 음성 및 영상 통화

**UDP 장점**
- (지연을 유발하는) **연결을 설립하지 않는다.**
- 단순함: 송/수신측 연결 상태를 유지하지 않는다.
- header의 크기가 작다.
- **혼잡 제어가 없다**: UDP는 원하는 만큼 빨리 보낼 수 있다.

### TCP(Transmission Control Protocol)

**특징**

- `point-to-point`(점대점) 통신: 단일송신측, 단일수신측만이 존재한다.
- 신뢰적, 순서 유지
- full-duplex(전이중) data: 한 연결에 양방향으로 데이터를 전송한다. (최대 세그먼트 사이즈가 정해져있다.)
- connection-oriented(연결 지향형): hanshaking으로 송수신측의 상태를 초기화한 후 데이터를 교환한다.

